<html>

  <head>
  </head>

  <body>
    <style>
      .content {
        background-color: rgb(114, 9, 9);
        height: 100vh;
        width: 100vw;
      }
    </style>

    <!-- 1. The <iframe> (and video player) will replace this <div> tag. -->


    <div id="container" class="content">
    </div>

    <script type="text/javascript" src="//www.gstatic.com/cast/sdk/libs/caf_receiver/v3/cast_receiver_framework.js" />
    </script>
    <script>
      const context = cast.framework.CastReceiverContext.getInstance();

      var ns = 'urn:x-cast:com.google.cast.sample.helloworld';
      window.messageBus = window.castReceiverManager.getCastMessageBus(ns);
      window.messageBus.onMessage = function(e) {
        var msg = JSON.parse(e.data);
        console.log(msg);
        window.messageBus.send(e.senderId, 'ok');
      };

      // 2. This code loads the IFrame Player API code asynchronously.
      var tag = document.createElement('script');

      tag.src = "https://www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      var player;

      function onYouTubeIframeAPIReady() {
        //TODO send message to senders
        //TODO save state and response to new sender after that
      }
      context.start({
        maxInactivity: 12000
      });
    </script>
  </body>

</html>