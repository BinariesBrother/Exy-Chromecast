<html>

  <head>
  </head>

  <body>
    <style>
      .content {
        background-image: url("assets/exy.svg");
        background-color: rgb(114, 9, 9);
        height: 100vh;
        width: 100vw;
      }
    </style>

    <!-- 1. The <iframe> (and video player) will replace this <div> tag. -->


    <div id="youtube-container" class="content">
    </div>


    <script type="text/javascript" src="//www.gstatic.com/cast/sdk/libs/caf_receiver/v3/cast_receiver_framework.js">
    </script>
    <script type="text/javascript" src="lib/youtube/YoutubeContainer.js">
    </script>
    <script type="text/javascript" src="lib/youtube/PlayerWrapper.js">
    </script>
    <script type="text/javascript" src="lib/chromecast/ChromeCastApi.js">
    </script>
    <script>
      var tag = document.createElement('script');

      tag.src = "https://www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      const context = cast.framework.CastReceiverContext.getInstance();

      var ns = 'urn:x-cast:com.exy.player';
      context.addCustomMessageListener(ns, function(e) {
        if (e && e.data && e.data.name === "addVideo") {
          YoutubeContainer.instance.add(e.data.videoId);
        }
      });

      function onYouTubeIframeAPIReady() {
        //TODO send message to senders
        //TODO save state and response to new sender after that
      }
      context.start({
        maxInactivity: 12000
      });
    </script>
  </body>

</html>